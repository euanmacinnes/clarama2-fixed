<!-- Input Source File -->
<div class="input-group w-100 my-2 shadow-sm border border-2 border-primary rounded">
    <input id="task_step_{{ loop_index }}_source" type="text"
           class="form-control rounded-0 border border-end-0 border-light-subtle removeInputFocus"
           placeholder="Data Source Filename" aria-label="Data source relative filename"
           value="{{ source }}">
    <button type="button" class="gridbrowsefile border border-start-0 border-light-subtle bg-white px-2"
            data-bs-toggle="modal" data-bs-target="#browseFileModal"
            inputId="task_step_{{ loop_index }}_source" filters="*.source.yaml|*.csv|*.xlsx">
        <i class="bi bi-folder2-open"></i>
    </button>

    {% if source %}
        <a href="{{ source }}" target="_blank" id="task_step_{{ loop_index }}_browse_link" class="text-decoration-none text-white">
            <button id="task_step_{{ loop_index }}_browse" type="button"
                    class="btn btn-secondary datasource" aria-haspopup="true"
                    aria-expanded="false" style="border-radius: 0px 4px 4px 0px;">
                <i class="bi bi-pen"></i>
            </button>
        </a>
    {% else %}
        <a href="#" target="_blank" id="task_step_{{ loop_index }}_browse_link"
           class="text-decoration-none text-white" style="display:none;">
            <button id="task_step_{{ loop_index }}_browse" type="button"
                    class="btn btn-secondary datasource" aria-haspopup="true"
                    aria-expanded="false" style="border-radius: 0px 4px 4px 0px;">
                <i class="bi bi-pen"></i>
            </button>
        </a>
    {% endif %}
</div>

<!-- SQL editor -->
<div id="content_query_{{ loop_index }}" name="task_step_field_{{ loop_index }}" editor="sql"
     class="source-editor form-control clarama-field-editor" style="min-height: 100px">{{ content }}</div>